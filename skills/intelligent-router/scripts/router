#!/usr/bin/env bash
# Intelligent Router CLI Wrapper
# Detects EvoClaw vs OpenClaw environment and routes appropriately

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Detect environment
if command -v evoclaw &> /dev/null; then
    # Running in EvoClaw environment - use built-in router CLI
    exec evoclaw router "$@"
else
    # Running in OpenClaw environment - use Python CLI directly
    PYTHON_CLI="$SCRIPT_DIR/router.py"
    
    if [[ ! -f "$PYTHON_CLI" ]]; then
        echo "Error: router.py not found at $PYTHON_CLI" >&2
        exit 1
    fi
    
    exec python3 "$PYTHON_CLI" "$@"
fi
